(this["webpackJsonpchild-names-stats"]=this["webpackJsonpchild-names-stats"]||[]).push([[0],{23:function(e,t,a){},26:function(e,t,a){e.exports=a(59)},31:function(e,t,a){},32:function(e,t,a){},50:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n,c,r=a(0),o=a.n(r),s=a(24),l=a.n(s),i=(a(31),a(32),a(12)),u=a(8),d=a(7),m=a(13),b=a.n(m),p="https://cors-anywhere.herokuapp.com/https://api.dane.gov.pl",f=function(e,t,a){var n=e.data.data.map((function(e){return{name:e.attributes[t.nameCol],count:e.attributes[t.countCol]}})).filter((function(e){return e.name===a.toUpperCase()}));return n.length?n[0]:null},g=(a(50),a(11)),h=a.n(g),v=(a(23),function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){"undefined"!==typeof n&&n.destroy(),n=new h.a(t.current,{type:"line",data:{labels:e.data.labels,datasets:e.data.datasets},options:{title:{display:!0,text:e.title},responsive:!0,maintainAspectRatio:!1}})}),[e.title,e.data,e.data.datasets]),o.a.createElement("div",{className:"Name-Chart"},o.a.createElement("canvas",{ref:t}))}),C=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){"undefined"!==typeof c&&c.destroy(),c=new h.a(t.current,{type:"bar",data:{labels:e.data.labels,datasets:e.data.datasets},options:{title:{display:!0,text:e.title},legend:{display:!1},responsive:!0,maintainAspectRatio:!1}})}),[e.title,e.data,e.data.datasets]),o.a.createElement("div",{className:"Name-Chart"},o.a.createElement("canvas",{ref:t}))},j=a(64),E=a(65),O=a(66),N=a(25),y=a(62),w=a(63),S=["rgb(0,35,255)","rgb(0,255,0)","rgb(253,220,0)","rgb(255,0,0)","rgb(0, 255, 255)","rgb(187,0,255)","rgb(200,130,123)","rgb(36,32,32)","rgb(38,75,102)","rgb(255,99,132)","rgb(58,96,9)","rgb(105,176,176)","rgb(255,150,2)","rgb(47,1,72)","rgb(140,135,135)"],k=function(){var e,t,a=Object(r.useState)(!1),n=Object(d.a)(a,2),c=n[0],s=n[1],l=Object(r.useState)(!1),m=Object(d.a)(l,2),g=m[0],h=m[1],k=Object(r.useState)((e=2e3,t=2019,Array.from({length:t-e+1},(function(t,a){return a+e})))),A=Object(d.a)(k,1)[0],U=Object(r.useState)(""),I=Object(d.a)(U,2),z=I[0],M=I[1],R=Object(r.useState)("K"),K=Object(d.a)(R,2),q=K[0],x=K[1],W=Object(r.useState)({labels:A,datasets:[]}),_=Object(d.a)(W,2),B=_[0],D=_[1],J=Object(r.useState)({labels:[],datasets:[{data:[],borderColor:S[0],backgroundColor:S[0]}]}),P=Object(d.a)(J,2),T=P[0],V=P[1],X=function(e,t){var a,n=(a=B.datasets.length)<15?S[a]:"#"+Math.floor(16777215*Math.random()).toString(16);s(!0),h(!0),function(e,t){var a=21457,n="col2",c="col1",r="col3",o="col4",s="".concat(n,':"').concat(e.toUpperCase(),'"'),l="".concat(o,':"').concat(t.toUpperCase(),'"');return b.a.get("".concat(p,"/resources/").concat(a,"/data?page=1&per_page=100&q=").concat(s," AND ").concat(l,"&sort=col1"),{headers:{"X-API-VERSION":"1.4","Content-Type":"application/json"}}).then((function(t){return t.data.data.map((function(e){return{name:e.attributes[n],year:e.attributes[c],count:e.attributes[r]}})).filter((function(t){return t.name===e.toUpperCase()}))}))}(e.trim(),t).then((function(t){var a=$(e,t,n);D(Object(u.a)(Object(u.a)({},B),{},{datasets:[].concat(Object(i.a)(B.datasets),[a])})),s(!1)})).catch((function(){return s(!1)})),function(e,t){var a={voivodeshipNumCol:"col1",voivodeshipCol:"col2",nameCol:"col3",countCol:"col5"},n="".concat(a.nameCol,":%22").concat(e.toUpperCase(),"%22%20AND%20").concat(a.voivodeshipNumCol,":").concat(12),c="".concat(p,"/resources/").concat(21451,"/data?page=1&per_page=100&q=").concat(n,"&sort="),r="".concat(p,"/resources/").concat(21449,"/data?page=1&per_page=100&q=").concat(n,"&sort=");return b.a.get("K"===t?c:r,{headers:{"X-API-VERSION":"1.4","Content-Type":"application/json"}}).then((function(t){return f(t,a,e)})).then((function(t){return t||{name:e.toUpperCase(),count:0}}))}(e.trim(),t).then((function(e){if(e){var t=[].concat(Object(i.a)(T.labels),[e.name.toUpperCase()]),a=Object(u.a)({},T.datasets[0]);a.data=[].concat(Object(i.a)(a.data),[e.count]),V(Object(u.a)(Object(u.a)({},T),{},{labels:t,datasets:[a]}))}h(!1)})).catch((function(){return h(!1)}))},$=function(e,t,a){return{label:e.toUpperCase(),data:F(t),fill:!1,borderColor:a,backgroundColor:a}},F=function(e){return A.map((function(t){var a=e.find((function(e){return e.year===t}));return null!=a?a.count:0}))};return o.a.createElement("div",{className:"NameStats"},o.a.createElement("div",{className:"input-container",l:!0},o.a.createElement(j.a,{className:"inputs p-2"},o.a.createElement(E.a,{className:"col-4 mr-3",value:z,onChange:function(e){return M(e.target.value)},placeholder:"Imi\u0119"}),o.a.createElement(E.a,{className:"col-4 mr-3",as:"select",value:q,onChange:function(e){return x(e.target.value)}},o.a.createElement("option",{value:"K"},"Kobieta"),o.a.createElement("option",{value:"M"},"M\u0119\u017cczyzna")),o.a.createElement(O.a,{className:"col-2 mr-2",onClick:function(){z&&(X(z,q),M(""))},disabled:c||g},c||g?o.a.createElement(N.a,{animation:"border",size:"sm"}):o.a.createElement(y.a,{size:25})),o.a.createElement(O.a,{className:"col-2",onClick:function(){D({labels:A,datasets:[]}),V({labels:[],datasets:[{data:[],borderColor:S[0],backgroundColor:S[0]}]})},variant:"danger"},o.a.createElement(w.a,{size:25}))),o.a.createElement("hr",{className:"mt-0 mb-0",l:!0})),o.a.createElement("div",{className:"chart-container"},B.datasets.length?o.a.createElement(v,{data:B,title:"Imiona w latach 2000-2019"}):null,T.labels.length?o.a.createElement(C,{data:T,title:"Wojew\xf3dztwo Ma\u0142opolskie 2019"}):null))};var A=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(58);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.dd6ad82e.chunk.js.map