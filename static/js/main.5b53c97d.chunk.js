(this["webpackJsonpchild-names-stats"]=this["webpackJsonpchild-names-stats"]||[]).push([[0],{25:function(t,e,a){t.exports=a(58)},30:function(t,e,a){},31:function(t,e,a){},49:function(t,e,a){},58:function(t,e,a){"use strict";a.r(e);var n,c,o=a(0),r=a.n(o),s=a(23),l=a.n(s),i=(a(30),a(31),a(13)),u=a(8),d=a(7),p=a(12),b=a.n(p),m="https://cors-anywhere.herokuapp.com/https://api.dane.gov.pl",f=function(t,e,a){var n=t.data.data.map((function(t){return{name:t.attributes[e.nameCol],count:t.attributes[e.countCol]}})).filter((function(t){return t.name===a.toUpperCase()}));return n.length?n[0]:n},g=(a(49),a(11)),h=a.n(g),v=function(t){var e=Object(o.useRef)();return Object(o.useEffect)((function(){"undefined"!==typeof n&&n.destroy(),n=new h.a(e.current,{type:"line",data:{labels:t.data.labels,datasets:t.data.datasets},options:{title:{display:!0,text:t.title},responsive:!0}})}),[t.title,t.data,t.data.datasets]),r.a.createElement("div",{style:{width:"95%",margin:"auto",padding:"30px 0"}},r.a.createElement("canvas",{ref:e}))},j=function(t){var e=Object(o.useRef)();return Object(o.useEffect)((function(){"undefined"!==typeof c&&c.destroy(),c=new h.a(e.current,{type:"bar",data:{labels:t.data.labels,datasets:t.data.datasets},options:{title:{display:!0,text:t.title},legend:{display:!1},responsive:!0}})}),[t.title,t.data,t.data.datasets]),r.a.createElement("div",{style:{width:"95%",margin:"auto",padding:"30px 0"}},r.a.createElement("canvas",{ref:e}))},O=a(62),E=a(63),C=a(64),y=a(24),w=a(61),N=["rgb(0,35,255)","rgb(0,255,0)","rgb(253,220,0)","rgb(255,0,0)","rgb(0, 255, 255)","rgb(187,0,255)","rgb(200,130,123)","rgb(36,32,32)","rgb(38,75,102)","rgb(255,99,132)","rgb(58,96,9)","rgb(105,176,176)","rgb(255,150,2)","rgb(47,1,72)","rgb(140,135,135)"],S=function(){var t,e,a=Object(o.useState)(!1),n=Object(d.a)(a,2),c=n[0],s=n[1],l=Object(o.useState)(!1),p=Object(d.a)(l,2),g=p[0],h=p[1],S=Object(o.useState)((t=2e3,e=2019,Array.from({length:e-t+1},(function(e,a){return a+t})))),k=Object(d.a)(S,1)[0],I=Object(o.useState)(""),U=Object(d.a)(I,2),A=U[0],M=U[1],x=Object(o.useState)("K"),z=Object(d.a)(x,2),R=z[0],q=z[1],K=Object(o.useState)({labels:k,datasets:[]}),W=Object(d.a)(K,2),_=W[0],B=W[1],D=Object(o.useState)({labels:[],datasets:[{data:[],borderColor:N[0],backgroundColor:N[0]}]}),J=Object(d.a)(D,2),P=J[0],T=J[1],V=function(t,e){var a,n=(a=_.datasets.length)<15?N[a]:"#"+Math.floor(16777215*Math.random()).toString(16);s(!0),h(!0),function(t,e){var a=21457,n="col2",c="col1",o="col3",r="col4",s="".concat(n,':"').concat(t.toUpperCase(),'"'),l="".concat(r,':"').concat(e.toUpperCase(),'"');return b.a.get("".concat(m,"/resources/").concat(a,"/data?page=1&per_page=100&q=").concat(s," AND ").concat(l,"&sort=col1"),{headers:{"X-API-VERSION":"1.4","Content-Type":"application/json"}}).then((function(e){return e.data.data.map((function(t){return{name:t.attributes[n],year:t.attributes[c],count:t.attributes[o]}})).filter((function(e){return e.name===t.toUpperCase()}))}))}(t.trim(),e).then((function(e){var a=X(t,e,n);B(Object(u.a)(Object(u.a)({},_),{},{datasets:[].concat(Object(i.a)(_.datasets),[a])})),s(!1)})).catch((function(){return s(!1)})),function(t){var e={voivodeshipNumCol:"col1",voivodeshipCol:"col2",nameCol:"col3",countCol:"col5"},a="".concat(e.nameCol,":%22").concat(t.toUpperCase(),"%22%20AND%20").concat(e.voivodeshipNumCol,":").concat(12),n="".concat(m,"/resources/").concat(21451,"/data?page=1&per_page=100&q=").concat(a,"&sort="),c="".concat(m,"/resources/").concat(21449,"/data?page=1&per_page=100&q=").concat(a,"&sort="),o={"X-API-VERSION":"1.4","Content-Type":"application/json"};return b.a.get(n,{headers:o}).then((function(a){return f(a,e,t)})).then((function(a){return a&&a.name&&a.count?a:b.a.get(c,{headers:o}).then((function(a){return f(a,e,t)}))}))}(t.trim()).then((function(t){if(t&&t.name&&t.count){var e=[].concat(Object(i.a)(P.labels),[t.name.toUpperCase()]),a=Object(u.a)({},P.datasets[0]);a.data=[].concat(Object(i.a)(a.data),[t.count]),T(Object(u.a)(Object(u.a)({},P),{},{labels:e,datasets:[a]}))}h(!1)})).catch((function(){return h(!1)}))},X=function(t,e,a){return{label:t.toUpperCase(),data:$(e),fill:!1,borderColor:a,backgroundColor:a}},$=function(t){return k.map((function(e){var a=t.find((function(t){return t.year===e}));return null!=a?a.count:0}))};return r.a.createElement("div",{className:"NameStats"},r.a.createElement(O.a,{className:"inputs p-2"},r.a.createElement(E.a,{className:"col-5 mr-3",value:A,onChange:function(t){return M(t.target.value)},placeholder:"Imi\u0119"}),r.a.createElement(E.a,{className:"col-4 mr-3",as:"select",value:R,onChange:function(t){return q(t.target.value)}},r.a.createElement("option",{value:"K"},"Kobieta"),r.a.createElement("option",{value:"M"},"M\u0119\u017cczyzna")),r.a.createElement(C.a,{className:"col-2",onClick:function(){A&&(V(A,R),M(""))},disabled:c||g},c||g?r.a.createElement(y.a,{animation:"border"}):r.a.createElement(w.a,{size:25}))),r.a.createElement("hr",null),_.datasets.length?r.a.createElement(v,{data:_,title:"Imiona w latach 2000-2019"}):null,P.labels.length?r.a.createElement(j,{data:P,title:"Wojew\xf3dztwo Ma\u0142opolskie 2019"}):null)};var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(57);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.5b53c97d.chunk.js.map