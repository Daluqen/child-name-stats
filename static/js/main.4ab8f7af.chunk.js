(this["webpackJsonpchild-names-stats"]=this["webpackJsonpchild-names-stats"]||[]).push([[0],{24:function(t,e,a){t.exports=a(57)},29:function(t,e,a){},30:function(t,e,a){},48:function(t,e,a){},57:function(t,e,a){"use strict";a.r(e);var n,o,r=a(0),c=a.n(r),s=a(23),l=a.n(s),i=(a(29),a(30),a(13)),u=a(7),d=a(6),p=a(11),b=a.n(p),m="https://cors-anywhere.herokuapp.com/https://api.dane.gov.pl",f=function(t,e,a){var n=t.data.data.map((function(t){return{name:t.attributes[e.nameCol],count:t.attributes[e.countCol]}})).filter((function(t){return t.name===a.toUpperCase()}));return n.length?n[0]:n},g=(a(48),a(10)),h=a.n(g),v=function(t){var e=Object(r.useRef)();return Object(r.useEffect)((function(){"undefined"!==typeof n&&n.destroy(),n=new h.a(e.current,{type:"line",data:{labels:t.data.labels,datasets:t.data.datasets},options:{title:{display:!0,text:t.title},responsive:!0}})}),[t.title,t.data,t.data.datasets]),c.a.createElement("div",{style:{width:"95%",margin:"auto",padding:"30px 0"}},c.a.createElement("canvas",{ref:e}))},j=function(t){var e=Object(r.useRef)();return Object(r.useEffect)((function(){"undefined"!==typeof o&&o.destroy(),o=new h.a(e.current,{type:"bar",data:{labels:t.data.labels,datasets:t.data.datasets},options:{title:{display:!0,text:t.title},legend:{display:!1},responsive:!0}})}),[t.title,t.data,t.data.datasets]),c.a.createElement("div",{style:{width:"95%",margin:"auto",padding:"30px 0"}},c.a.createElement("canvas",{ref:e}))},C=a(59),O=a(60),E=a(61),y=["rgb(0,35,255)","rgb(0,255,0)","rgb(253,220,0)","rgb(255,0,0)","rgb(0, 255, 255)","rgb(187,0,255)","rgb(200,130,123)","rgb(36,32,32)","rgb(38,75,102)","rgb(255,99,132)","rgb(58,96,9)","rgb(105,176,176)","rgb(255,150,2)","rgb(47,1,72)","rgb(140,135,135)"],w=function(){var t,e,a=Object(r.useState)((t=2e3,e=2019,Array.from({length:e-t+1},(function(e,a){return a+t})))),n=Object(d.a)(a,1)[0],o=Object(r.useState)(""),s=Object(d.a)(o,2),l=s[0],p=s[1],g=Object(r.useState)("K"),h=Object(d.a)(g,2),w=h[0],N=h[1],S=Object(r.useState)({labels:n,datasets:[]}),k=Object(d.a)(S,2),A=k[0],I=k[1],U=Object(r.useState)({labels:[],datasets:[{data:[],borderColor:y[0],backgroundColor:y[0]}]}),M=Object(d.a)(U,2),x=M[0],R=M[1],q=function(t,e){var a,n=(a=A.datasets.length)<15?y[a]:"#"+Math.floor(16777215*Math.random()).toString(16);(function(t,e){var a=21457,n="col2",o="col1",r="col3",c="col4",s="".concat(n,':"').concat(t.toUpperCase(),'"'),l="".concat(c,':"').concat(e.toUpperCase(),'"');return b.a.get("".concat(m,"/resources/").concat(a,"/data?page=1&per_page=100&q=").concat(s," AND ").concat(l,"&sort=col1"),{headers:{"X-API-VERSION":"1.4","Content-Type":"application/json"}}).then((function(e){return e.data.data.map((function(t){return{name:t.attributes[n],year:t.attributes[o],count:t.attributes[r]}})).filter((function(e){return e.name===t.toUpperCase()}))}))})(t.trim(),e).then((function(e){var a=z(t,e,n);I(Object(u.a)(Object(u.a)({},A),{},{datasets:[].concat(Object(i.a)(A.datasets),[a])}))})),function(t){var e={voivodeshipNumCol:"col1",voivodeshipCol:"col2",nameCol:"col3",countCol:"col5"},a="".concat(e.nameCol,":%22").concat(t.toUpperCase(),"%22%20AND%20").concat(e.voivodeshipNumCol,":").concat(12),n="".concat(m,"/resources/").concat(21451,"/data?page=1&per_page=100&q=").concat(a,"&sort="),o="".concat(m,"/resources/").concat(21449,"/data?page=1&per_page=100&q=").concat(a,"&sort="),r={"X-API-VERSION":"1.4","Content-Type":"application/json"};return b.a.get(n,{headers:r}).then((function(a){return f(a,e,t)})).then((function(a){return a&&a.name&&a.count?a:b.a.get(o,{headers:r}).then((function(a){return f(a,e,t)}))}))}(t.trim()).then((function(t){if(t&&t.name&&t.count){var e=[].concat(Object(i.a)(x.labels),[t.name.toUpperCase()]),a=Object(u.a)({},x.datasets[0]);a.data=[].concat(Object(i.a)(a.data),[t.count]),R(Object(u.a)(Object(u.a)({},x),{},{labels:e,datasets:[a]}))}}))},z=function(t,e,a){return{label:t.toUpperCase(),data:K(e),fill:!1,borderColor:a,backgroundColor:a}},K=function(t){return n.map((function(e){var a=t.find((function(t){return t.year===e}));return null!=a?a.count:0}))};return c.a.createElement("div",{className:"NameStats"},c.a.createElement(C.a,{className:"inputs p-2"},c.a.createElement(O.a,{className:"col-5 mr-3",value:l,onChange:function(t){return p(t.target.value)},placeholder:"Imi\u0119"}),c.a.createElement(O.a,{className:"col-4 mr-3",as:"select",value:w,onChange:function(t){return N(t.target.value)}},c.a.createElement("option",{value:"K"},"Kobieta"),c.a.createElement("option",{value:"M"},"M\u0119\u017cczyzna")),c.a.createElement(E.a,{className:"col-2",onClick:function(){l&&(q(l,w),p(""))}},"Add")),c.a.createElement("hr",null),A.datasets.length?c.a.createElement(v,{data:A,title:"Imiona w latach 2000-2019"}):null,x.labels.length?c.a.createElement(j,{data:x,title:"Wojew\xf3dztwo Ma\u0142opolskie 2019"}):null)};var N=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(56);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.4ab8f7af.chunk.js.map